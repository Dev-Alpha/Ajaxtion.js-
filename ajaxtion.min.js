/*** Author  : Meksi Abdou* Script  : Ajax Request* Version : 1.0.1* Email   : meksiabdou@gmail.com* WebSite : https://www.facebook.com/meksi.abdou* License : The MIT License (MIT)*/
var word_size = "لايسمح تحميل أكثر من حجم 10 MB", word_empty = " يجب إختيار ملف مراد تحميله ", word_len_files = "لايسمح تحميل أكثر من ملف واحد";
function url(){return location.protocol+"//"+window.location.host+"/"}function create_rq(){var a;try{a=new XMLHttpRequest}catch(b){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){console.log("Probleme In You Browser")}}}return a}function _(a){return document.getElementById(a)}function ajax_loading(a){if(""!==a.trim()){var b=["jpg","jpeg","bmp","gif","png"],c=a.split("."),d=c.length;return b[0]==c[d-1]?"<div class='div_loading'><img class='loading' src='"+a+"' /></div>":b[1]==c[d-1]?"<div class='div_loading'><img class='loading' src='"+a+"' /></div>":b[2]==c[d-1]?"<div class='div_loading'><img class='loading' src='"+a+"' /></div>":b[3]==c[d-1]?"<div class='div_loading'><img class='loading' src='"+a+"' /></div>":b[4]==c[d-1]?"<div class='div_loading'><img class='loading' src='"+a+"' /></div>":a}return""}function filter(a){return a.replace(/[&\/\\#+()$~%'":*{}]/g,"")}function ajax(a){var b,c,d,e,f,g,h,i,j;if(void 0==a.id)return console.log("Error IdRequest undefined"),!1;if(void 0==a.dir)return console.log("Error Dir Page Request undefined"),!1;if(void 0==a.form)return console.log("Error Form Name Request undefined"),!1;if(""==a.id.trim())return console.log("Error Id Request Empty"),!1;if(""==a.dir.trim())return console.log("Error Dir Page Request Empty"),!1;if(""==a.form.trim())return console.log("Error Form Name Request Empty"),!1;if(g=a.dir,h=a.id,j=_(h),i=void 0==a.loading?"":a.loading,c=document.getElementsByName(a.form)[0],c=c.getElementsByClassName("ajax_value"),0==c.length)return console.log("Error Class Name Input 'ajax_value' is undefined"),!1;for(f=0;f<c.length;f++)d+=c[f].name+"="+filter(c[f].value)+"&";e+=d+"#@/*",e=e.replace("&#@/*","").replace("undefinedundefined",""),b=create_rq(),b.onreadystatechange=function(){this.readyState<4&&(j.innerHTML=ajax_loading(i)),4==this.readyState&&200==this.status&&(j.innerHTML=this.responseText,void 0!==a.callback&&""!==a.callback&&"[object String]"===Object.prototype.toString.call(a.callback)?(callback=new Function("return ("+a.callback+")"),_callback=callback()):_callback="")},b.open("POST",url()+g,!0),b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.send(e)}function ajax_get(a){var b,c,d,e,f,g,h,i;return void 0==a.id?(console.log("Error Id Requestundefined"),!1):void 0==a.dir?(console.log("Error Dir Page Request undefined"),!1):void 0==a.get?(console.log("Error GET Request undefined"),!1):""==a.id.trim()?(console.log("Error Id Request Empty"),!1):""==a.dir.trim()?(console.log("Error Dir Page Request Empty"),!1):""==a.get.trim()?(console.log("Error GET Request Empty"),!1):(d=a.dir,e=a.id,g=_(e),f=void 0==a.loading?"":a.loading,c=a.get,b=create_rq(),b.onreadystatechange=function(){this.readyState<4&&(g.innerHTML=ajax_loading(f)),4==this.readyState&&200==this.status&&(g.innerHTML=this.responseText,void 0!==a.callback&&""!==a.callback&&"[object String]"===Object.prototype.toString.call(a.callback)?(h=new Function("return ("+a.callback+")"),i=h()):i="")},b.open("POST",url()+d,!0),b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),void b.send(c))}function ajax_upload_files(a){var b,c,d,f,h,i,j,k,l,e=_("files"),g=new FormData;if(void 0==e)return console.log("Error Id => 'files' input files is undefined"),!1;if(void 0==a.id)return console.log("Error Id Request undefined"),!1;if(void 0==a.dir)return console.log("Error Dir Page Request undefined"),!1;if(void 0==a.num)return console.log("Error num files Request undefined"),!1;if(void 0==a.size)return console.log("Error size files Request undefined"),!1;if(""==a.id.trim())return console.log("Error Id Request Empty"),!1;if(""==a.dir.trim())return console.log("Error Dir Page Request Empty"),!1;if(""==a.num.trim()?f=e.files.length:""==a.size.trim()?h=20485760:(dir=a.dir,id=a.id,div=_(id),f=a.num,h=a.size),k=void 0==a.loading?"":a.loading,0==e.files.length)return div.innerHTML=word_empty,!1;if(e.files.length>f)return div.innerHTML=word_len_files,!1;for(b=0;b<f;b++)if(c=e.files[b],g.append("files[]",c),d=c.size,d>h)return div.innerHTML=word_size,!1;l=create_rq(),l.onreadystatechange=function(){this.readyState<4&&(div.innerHTML=ajax_loading(k)),4==this.readyState&&200==this.status&&(div.innerHTML=this.responseText),this.upload.addEventListener("progress",function(b){var c=b.loaded/b.total*100;_("progress").style.display="block",_("progressBar").style.width=Math.round(c)+"%",b.loaded==b.total&&setTimeout(function(){_("progressBar").style.width="0%",_("progress").style.display="none",void 0!==a.callback&&""!==a.callback&&"[object String]"===Object.prototype.toString.call(a.callback)?(j=new Function("return ("+a.callback+")"),i=j()):i=""},1500)},!1)},l.open("POST",url()+dir,!0),l.send(g)}
