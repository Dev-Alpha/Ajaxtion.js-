/*** Author  : Meksi Abdou* Script  : Ajax Request* Version : 1.0.1* Email   : meksiabdou@gmail.com* WebSite : https://www.facebook.com/meksi.abdou* License : The MIT License (MIT)*/
var word_size = "لايسمح تحميل أكثر من حجم 10 MB", word_empty = " يجب إختيار ملف مراد تحميله ", word_len_files = "لايسمح تحميل أكثر من ملف واحد";
function url(){return location.protocol+"//"+window.location.host+"/"}function create_rq(){var a;try{a=new XMLHttpRequest}catch(b){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){console.log("Probleme In You Browser")}}}return a}function _(a){return document.getElementById(a)}function Selector(a){return document.querySelector(a)}function ajax_loading(a){if(""!==a.trim()){var b=["jpg","jpeg","bmp","gif","png"],c=a.split("."),d=c.length;return b[0]==c[d-1]?"<selector class='selector_loading'><img class='loading' src='"+a+"' /></selector>":b[1]==c[d-1]?"<selector class='selector_loading'><img class='loading' src='"+a+"' /></selector>":b[2]==c[d-1]?"<selector class='selector_loading'><img class='loading' src='"+a+"' /></selector>":b[3]==c[d-1]?"<selector class='selector_loading'><img class='loading' src='"+a+"' /></selector>":b[4]==c[d-1]?"<selector class='selector_loading'><img class='loading' src='"+a+"' /></selector>":a}return""}function filter(a){return a.replace(/[&\/\\#+()$~%'":*{}]/g,"")}function ajax(a){var b,c,d,e,f,g,h,i;if(void 0==a.slc_respond)return console.log("Error Id  Request undefined"),!1;if(void 0==a.url)return console.log("Error url Page Request undefined"),!1;if(void 0==a.form)return console.log("Error Form Name Request undefined"),!1;if(""==a.url.trim())return console.log("Error Id Request Empty"),!1;if(""==a.url.trim())return console.log("Error url Page Request Empty"),!1;if(""==a.form.trim())return console.log("Error Form Name Request Empty"),!1;if(g=a.url,h=Selector(a.slc_respond),i=void 0==a.loading?"":a.loading,c=document.getElementsByName(a.form)[0],c=c.getElementsByClassName("ajax_value"),0==c.length)return console.log("Error Class Name Input 'ajax_value' is undefined"),!1;for(f=0;f<c.length;f++)d+=c[f].name+"="+filter(c[f].value)+"&";e+=d+"#@/*",e=e.replace("&#@/*","").replace("undefinedundefined",""),b=create_rq(),b.onreadystatechange=function(){this.readyState<4&&(h.innerHTML=ajax_loading(i)),4==this.readyState&&200==this.status&&(h.innerHTML=this.responseText,void 0!==a.callback&&""!==a.callback&&"[object String]"===Object.prototype.toString.call(a.callback)?(callback=new Function("return ("+a.callback+")"),_callback=callback()):_callback="")},b.open("POST",g()+g,!0),b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.send(e)}function ajax_get(a){var b,c,d,e,f,g,h;return void 0==a.slc_respond?(console.log("Error Id Request  undefined"),!1):void 0==a.url?(console.log("Error url Page Request undefined"),!1):void 0==a.get?(console.log("Error GET Request undefined"),!1):""==a.slc_respond.trim()?(console.log("Error Id Request Empty"),!1):""==a.url.trim()?(console.log("Error url Page Request Empty"),!1):""==a.get.trim()?(console.log("Error GET Request Empty"),!1):(d=a.url,f=Selector(a.slc_respond),e=void 0==a.loading?"":a.loading,c=a.get,b=create_rq(),b.onreadystatechange=function(){this.readyState<4&&(f.innerHTML=ajax_loading(e)),4==this.readyState&&200==this.status&&(f.innerHTML=this.responseText,void 0!==a.callback&&""!==a.callback&&"[object String]"===Object.prototype.toString.call(a.callback)?(g=new Function("return ("+a.callback+")"),h=g()):h="")},b.open("POST",d()+d,!0),b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),void b.send(c))}function ajax_upload_files(a){var b,c,d,f,h,i,j,k,l,m,n,e=_("files"),g=new FormData;if(void 0==e)return console.log("Error Id => 'files' input files is undefined"),!1;if(void 0==a.slc_respond)return console.log("Error Id Request  undefined"),!1;if(void 0==a.url)return console.log("Error url Page Request undefined"),!1;if(void 0==a.num)return console.log("Error num files Request undefined"),!1;if(void 0==a.size)return console.log("Error size files Request undefined"),!1;if(""==a.slc_respond.trim())return console.log("Error Id Request Empty"),!1;if(""==a.url.trim())return console.log("Error url Page Request Empty"),!1;if(""==a.num.trim()?f=e.files.length:""==a.size.trim()?h=20485760:(j=a.url,k=Selector(a.slc_respond),f=a.num,h=a.size),m=void 0==a.loading?"":a.loading,0==e.files.length)return k.innerHTML=word_empty,!1;if(e.files.length>f)return k.innerHTML=word_len_files,!1;for(b=0;b<f;b++)if(c=e.files[b],g.append("files[]",c),d=c.size,d>h)return k.innerHTML=word_size,!1;n=create_rq(),n.onreadystatechange=function(){this.readyState<4&&(k.innerHTML=ajax_loading(m)),4==this.readyState&&200==this.status&&(k.innerHTML=this.responseText),this.upload.addEventListener("progress",function(b){var c=b.loaded/b.total*100;_("progress").style.display="block",_("progressBar").style.width=Math.round(c)+"%",b.loaded==b.total&&setTimeout(function(){_("progressBar").style.width="0%",_("progress").style.display="none",void 0!==a.callback&&""!==a.callback&&"[object String]"===Object.prototype.toString.call(a.callback)?(l=new Function("return ("+a.callback+")"),i=l()):i=""},1500)},!1)},n.open("POST",j()+j,!0),n.send(g)}
